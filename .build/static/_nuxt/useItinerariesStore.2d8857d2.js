import{S as A,r as p,x as C,J as _,l as g,T as u,U as o}from"./entry.9dbfbc2c.js";import{a as x}from"./dataStore.d7792384.js";const O=A("itineraries",()=>{const s=p(void 0),f=p(0),a=C(),w=async()=>{if(!a.userStore.userData)return;const e=await u.get(o("itinerary")+"?page="+f.value,{withCredentials:!0});e.status===200&&(x(e.data)&&f.value++,s.value?e.data.forEach(d):s.value=[...e.data])},c=async e=>{if(!a.userStore.userData)return;const t=await u.get(o("itinerary")+"/"+e,{withCredentials:!0});t.status===200&&(s.value?d(t.data):s.value=[t.data])},v=async e=>{if(!a.userStore.userData)return!1;const t=await u.post(o("itinerary"),{name:e,owner:a.userStore.userData._id},{withCredentials:!0});return t.status!==200?!1:(await c(t.data),!0)},y=async e=>{var n;if(!a.userStore.userData)return!1;const{_id:t,...r}=e;return(await u.patch(o("itinerary")+"/"+t,r,{withCredentials:!0})).status!==200?!1:((n=s.value)!=null&&n.some(l=>l._id===t)&&await c(t),!0)},h=async e=>{var r;return!a.userStore.userData||(await u.delete(o("itinerary")+"/"+e,{withCredentials:!0})).status!==200?!1:(s.value=(r=s.value)==null?void 0:r.filter(i=>i._id!==e),!0)},S=async(e,t)=>{var i;return!a.userStore.userData||(await u.post(o("itinerary")+"/"+e+"/places",{id:t},{withCredentials:!0})).status!==200?!1:((i=s.value)!=null&&i.some(n=>n._id===e)&&await c(e),!0)},m=async(e,t,r)=>{var n;return!a.userStore.userData||(await u.patch(o("itinerary")+"/"+e+"/places",{swapPlaces:[t,r]},{withCredentials:!0})).status!==200?!1:((n=s.value)!=null&&n.some(l=>l._id===e)&&await c(e),!0)},D=async(e,t)=>{var i;return!a.userStore.userData||(await u.delete(o("itinerary")+"/"+e+"/places/"+t,{withCredentials:!0})).status!==200?!1:((i=s.value)!=null&&i.some(n=>n._id===e)&&await c(e),!0)},d=e=>{s.value||(s.value=[]);const t=s.value.find(r=>r._id===e._id);t?Object.assign(t,e):s.value.push(e)};return _(()=>{a.userStore.userData||(s.value=void 0)}),{itineraries:g(()=>s.value),fetchNextAsync:w,fetchOneAsync:c,createAsync:v,updateAsync:y,deleteAsync:h,addPlaceAsync:S,swapPlacesAsync:m,removePlaceAsync:D}});export{O as u};
