import{g as x,o as n,m as P,w as y,a as u,d as S,t as w,b as N,e as $,D,n as E,_ as b,r as I,l as L,c as _,q as g,E as T,F as q,C as R,H as V,p as z,f as M}from"./entry.9dbfbc2c.js";import{_ as O}from"./StarRating.c3e15fc6.js";import{v as U}from"./index.db22a8d1.js";const j=["src"],H=x({__name:"PlaceCard",props:{name:{},image:{},level:{},starRating:{},to:{}},emits:["click"],setup(a,{emit:c}){const v=a;function l(t){t.target.src="https://static.vecteezy.com/system/resources/previews/005/337/799/original/icon-image-not-found-free-vector.jpg"}return(t,s)=>{const p=$,f=D,h=O,k=E;return n(),P(k,{level:t.level??"800",class:"card"},{default:y(()=>[u("img",{alt:"",src:t.image,onError:l},null,40,j),t.to?(n(),P(p,{key:0,to:t.to,tint:"light",class:"link",onClick:s[0]||(s[0]=r=>c("click",r))},{default:y(()=>[S(w(t.name),1)]),_:1},8,["to"])):(n(),P(f,{key:1,flat:!0,tint:"light",class:"link",onClick:s[1]||(s[1]=r=>c("click",r))},{default:y(()=>[S(w(t.name),1)]),_:1})),N(h,{rating:v.starRating},null,8,["rating"])]),_:1},8,["level"])}}});const A=b(H,[["__scopeId","data-v-ec6ae865"]]),B=a=>(z("data-v-82c478fd"),a=a(),M(),a),G=B(()=>u("header",null,[u("h2",null,"Places")],-1)),J=B(()=>u("label",{for:"searchPlaceName"},"Search by name:",-1)),K={key:1},Q=x({__name:"UserPlacesSection",props:{places:{},listClass:{}},emits:["requestPlaces","placeFocused"],setup(a,{emit:c}){const v=a,l=I(),t=I(""),s=L(()=>{var e;return(e=v.places)==null?void 0:e.filter(d=>d.name.toLowerCase().includes(t.value.toLowerCase()))}),p=I(0),f=e=>t.value=e,h=e=>c("placeFocused",e),k=e=>{l.value&&clearTimeout(l.value),l.value=setTimeout(f,50,e.target.value)},r=(e,d)=>{e.forEach(m=>{m.isIntersecting&&(d.unobserve(m.target),p.value++),p.value>=s.value.length&&c("requestPlaces")})};return(e,d)=>{const m=A;return n(),_("section",null,[G,J,u("input",{type:"text",id:"searchPlaceName",placeholder:"Search...",onInput:k},null,32),g(s).length>0?(n(),_("ol",{key:0,class:T(e.listClass)},[(n(!0),_(q,null,R(g(s),(o,F)=>V((n(),_("li",{key:o._id},[N(m,{name:o.name,image:o.photoSrcs.at(0),"star-rating":o.reviews.reduce((i,C)=>i+C.star,0)/o.reviews.length,onClick:i=>{i.preventDefault(),h(o._id)}},null,8,["name","image","star-rating","onClick"])])),[[g(U),(i,C)=>F===g(s).length-1&&r(i,C)]])),128))],2)):(n(),_("p",K,"No places found!"))])}}});const Z=b(Q,[["__scopeId","data-v-82c478fd"]]);export{Z as _};
