import{g as b,r as y,x as S,h as D,o as i,c as u,b as _,w as m,d as v,q as o,a as d,y as I,A as N,D as F,p as B,f as P,_ as C,m as T,B as A,l as V,t as E,F as q,I as M}from"./entry.bb74548b.js";import{u as k}from"./usePlacesStore.3ccf87c0.js";import{w,i as $}from"./dataStore.d7792384.js";import{_ as R}from"./UserPlacesSection.4461930d.js";import{_ as z}from"./Fab.eb68e09a.js";import"./StarRating.63be099d.js";import"./index.97fe0762.js";import"./index.f4bf0056.js";const L=a=>(B("data-v-71634332"),a=a(),P(),a),U={class:"delte-button-container"},W=L(()=>d("span",{class:"fa fa-trash"},null,-1)),Y=["open"],j=L(()=>d("p",null,"Do you really want to delete this place?",-1)),G={class:"delete-modal-buttons-container"},H=b({__name:"DeletePlaceButton",props:{removeId:{}},setup(a){const r=a,e=y(!1),p=S(),s=k(),t=y(!1);D(p.userStore,l=>{l.userData&&w(t,$(()=>s.places,s),null)},{immediate:!0});function c(l){s.deleteAsync(l)}return(l,n)=>{const f=F;return i(),u("div",U,[_(f,{"full-width":!0,color:"danger",onClick:n[0]||(n[0]=h=>e.value=!o(e))},{default:m(()=>[W,v(" Delete ")]),_:1}),o(e)?(i(),u("dialog",{key:0,open:o(e)},[d("form",{action:"#",method:"post",onSubmit:n[1]||(n[1]=I(h=>c(r.removeId),["prevent"])),onReset:n[2]||(n[2]=I(h=>e.value=!1,["prevent"]))},[j,d("div",G,[_(f,{type:"reset"},{default:m(()=>[v(" No, go back! ")]),_:1}),_(f,{color:"danger",type:"submit"},{default:m(()=>[v(" Yes, delete ")]),_:1})])],32)],8,Y)):N("",!0)])}}});const J=C(H,[["__scopeId","data-v-71634332"]]),K=b({__name:"CreatePlaceFab",setup(a){const r=S(),e=k(),p=y(!1);return D(r.userStore,s=>{s.userData&&w(p,$(()=>e.places,e),null)},{immediate:!0}),(s,t)=>{const c=z;return i(),T(c,{color:"primary",onClick:t[0]||(t[0]=l=>{o(e).createAsync("New place",[4.5,2.1]).then(n=>{n&&("navigateTo"in s?s.navigateTo:o(A))("/editpage/"+n)})})},{default:m(()=>[v(" + ")]),_:1})}}}),O=a=>(B("data-v-8b8db53d"),a=a(),P(),a),Q={key:0},X={key:1},Z={key:2},ee=O(()=>d("span",{class:"fa fa-pencil"},null,-1)),te=b({__name:"management",setup(a){const r=S(),e=k(),p=V(()=>{var t;return(t=e.places)==null?void 0:t.filter(c=>{var l;return c.owner._id===((l=r.userStore.userData)==null?void 0:l._id)})}),s=y(!1);return D(r.userStore,t=>{t.userData&&w(s,$(()=>e.places,e),null)},{immediate:!0}),(t,c)=>{var x;const l=M,n=J,f=R,h=K;return o(r).userStore.userData===void 0?(i(),u("p",Q,"Loading...")):o(r).userStore.userData?o(p)?(i(),u(q,{key:3},[d("header",null,[d("h2",null,"Welcome back, "+E((x=o(r).userStore.userData)==null?void 0:x.username),1)]),_(f,{places:o(p),"is-editable":!0,class:"place-list-section","list-class":"place-list",onRequestPlaces:c[0]||(c[0]=g=>o(e).fetchNextAsync()),onPlaceFocused:c[1]||(c[1]=g=>("navigateTo"in t?t.navigateTo:o(A))("/dashboard/"+g))},{default:m(g=>[_(l,{"full-width":!0,class:"place-action-button",to:"/editpage/"+g.placeId},{default:m(()=>[ee,v(" Edit ")]),_:2},1032,["to"]),_(n,{class:"place-action-button","remove-id":g.placeId},null,8,["remove-id"])]),_:1},8,["places"]),_(h)],64)):(i(),u("p",Z,"Loading...")):(i(),u("p",X,"Please log in to enter manager mode!"))}}});const _e=C(te,[["__scopeId","data-v-8b8db53d"]]);export{_e as default};
